Процедура ПередОткрытием(Отказ, СтандартнаяОбработка)

	Если Конвертация.Пустая() Тогда
		СообщитьОбОшибке("Не выбрана конвертация.", Отказ);
	КонецЕсли;

КонецПроцедуры // ПередОткрытием()

Процедура ПриОткрытии()

	ТаблицаРезультат = ВыполнитьЗапрос(Конвертация);
	
КонецПроцедуры // ПриОткрытии()

Процедура ТаблицаРезультатаПриВыводеСтроки(Элемент, ОформлениеСтроки, ДанныеСтроки)

	ОформлениеСтроки.Ячейки["ПКО"].ОтображатьКартинку = Истина;

	Если ДанныеСтроки.Строки.Количество() Тогда
		ОформлениеСтроки.Ячейки["ПКО"].ИндексКартинки = 0;
	Иначе
		ОформлениеСтроки.Ячейки["ПКО"].ИндексКартинки = 1;
	КонецЕсли;

КонецПроцедуры // ТаблицаРезультатаПриВыводеСтроки()

Процедура ТаблицаРезультатаВыбор(Элемент, ВыбраннаяСтрока, Колонка, СтандартнаяОбработка)

	ОткрытьЗначение(ВыбраннаяСтрока.ПКО);
	
КонецПроцедуры

Процедура КоманднаяПанельФормыУстановитьПометки(Кнопка)

	УстановитьПометки(ТаблицаРезультат, Истина);

КонецПроцедуры // КоманднаяПанельФормыУстановитьПометки()

Процедура КоманднаяПанельФормыСнятьПометки(Кнопка)

	УстановитьПометки(ТаблицаРезультат, Ложь);

КонецПроцедуры // КоманднаяПанельФормыСнятьПометки()

Процедура УстановитьПометки(Таблица, ЗначениеПометки)

	Для каждого Строка из Таблица.Строки Цикл
		Строка.Пометка = ЗначениеПометки;
		УстановитьПометки(Строка, ЗначениеПометки);
	КонецЦикла;

КонецПроцедуры // УстановитьПометки()

Процедура СоздатьПравилаКонвертации()
	
	СоздатьПравила(ТаблицаРезультат, ФлажокПриемник, ФлажокИсточник);
	
КонецПроцедуры


Процедура КнопкаВыполнитьНажатие(Элемент)

	СоздатьПравилаКонвертации();	

КонецПроцедуры // КнопкаВыполнитьНажатие()

Процедура ТаблицаРезультатаПриИзмененииФлажка(Элемент, Колонка)

	глУстановитьПометки(Элемент.ТекущаяСтрока);
	
КонецПроцедуры

Процедура ОсновныеДействияФормыОК(Кнопка)
	
	СоздатьПравилаКонвертации();
	Закрыть();
	
КонецПроцедуры

