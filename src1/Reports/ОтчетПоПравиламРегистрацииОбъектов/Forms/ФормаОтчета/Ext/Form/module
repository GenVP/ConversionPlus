
////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ФОРМЫ

Процедура ПриОткрытии()
	
	Если Не Регистрация.Пустая() Тогда
		
		СформироватьОтчет();
		
	КонецЕсли;
	
КонецПроцедуры

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ЭЛЕМЕНТОВ ФОРМЫ

Процедура СформироватьНажатие(Элемент)
	
	СформироватьОтчет();
	
КонецПроцедуры

Процедура РегистрацияПриИзменении(Элемент)
	
	СформироватьОтчет();
	
КонецПроцедуры

Процедура ВариантГруппировкиОтчетаПриИзменении(Элемент)
	
	СформироватьОтчет();
	
КонецПроцедуры

////////////////////////////////////////////////////////////////////////////////
// ПРОЦЕДУРЫ И ФУНКЦИИ

Процедура СформироватьОтчет()
	
	УстановитьЗначенияНастроек();
	
	ЭлементыФормы.Результат.Очистить();
	
	ДанныеРасшифровки = Новый ДанныеРасшифровкиКомпоновкиДанных;
	
	ЭтотОбъект.СкомпоноватьРезультат(ЭлементыФормы.Результат, ДанныеРасшифровки);
	
КонецПроцедуры

Процедура УстановитьЗначенияНастроек()
	
	// значения параметров
	УстановитьЗначениеПараметра(0, глИмяРегистраСоответствияОбъектовИнформационныхБаз());
	УстановитьЗначениеПараметра(1, Регистрация.Конфигурация);
	УстановитьЗначениеПараметра(2, Регистрация.ПланОбмена);
	УстановитьЗначениеПараметра(3, Регистрация);
	
	// выбор активной группировки отчета
	Настройки = КомпоновщикНастроек.Настройки;
	Настройки.Структура[0].Использование = Ложь;
	Настройки.Структура[1].Использование = Ложь;
	Настройки.Структура[2].Использование = Ложь;
	
	Настройки.Структура[ВариантГруппировкиОтчета].Использование = Истина;
	
КонецПроцедуры

Процедура УстановитьЗначениеПараметра(ИндексПараметра, Значение)
	
	КомпоновщикНастроек.Настройки.ПараметрыДанных.Элементы[ИндексПараметра].Значение = Значение;
	КомпоновщикНастроек.Настройки.ПараметрыДанных.Элементы[ИндексПараметра].Использование = Истина;
	
КонецПроцедуры

ВариантГруппировкиОтчета = 1;

СписокВыбора = ЭлементыФормы.ВариантГруппировкиОтчета.СписокВыбора;
СписокВыбора.Добавить(0, "Без группировки");
СписокВыбора.Добавить(1, "Группировать по объектам метаданных");
СписокВыбора.Добавить(2, "Группировать по режимам выгрузки");
