
Процедура ДанныеПоискаПКСПриВыводеСтроки(Элемент, ОформлениеСтроки, ДанныеСтроки)
	
	Если ТипЗнч(ДанныеСтроки.Объект) = Тип("СправочникСсылка.ПравилаКонвертацииОбъектов") Тогда
		
		ОформлениеСтроки.Ячейки.Объект.ИндексКартинки  = 0;
		
	Иначе 
		
		ОформлениеСтроки.Ячейки.Объект.ИндексКартинки   = 1;
				
	КонецЕсли;
	
	ОформлениеСтроки.Ячейки.Объект.ОтображатьКартинку = Истина;
	
КонецПроцедуры

Процедура ПередОткрытием(Отказ, СтандартнаяОбработка)
	
	Для Каждого СтрокаДерева Из ДанныеПоискаПКС.Строки Цикл
		
		ЭлементыФормы.ДанныеПоискаПКС.Развернуть(СтрокаДерева, Истина);
		
	КонецЦикла;
	
КонецПроцедуры

Процедура ПерейтиКПравиламОбменаПоВыбраннойСтроке(ВыбраннаяСтрока)
	
	Если ВыбраннаяСтрока = Неопределено	Тогда
		
		Возврат;
		
	КонецЕсли;
	
	ТипОбъекта = ТипЗнч(ВыбраннаяСтрока.Объект);
	
	Если ТипОбъекта = Тип("СправочникСсылка.ПравилаКонвертацииОбъектов") Тогда
		
		Попытка
			
			ВладелецФормы.ВладелецФормы.ЭлементыФормы.ПравилаКонвертацииОбъектов.ТекущаяСтрока = ВыбраннаяСтрока.Объект;
			
		Исключение
		КонецПопытки;
		
	ИначеЕсли ТипОбъекта = Тип("СправочникСсылка.ПравилаКонвертацииСвойств") Тогда
		
		Попытка
			
			ВладелецФормы.ВладелецФормы.ЭлементыФормы.ПравилаКонвертацииОбъектов.ТекущаяСтрока = ВыбраннаяСтрока.Объект.Владелец;
			ВладелецФормы.ВладелецФормы.ЭлементыФормы.ПравилаКонвертацииСвойств.ТекущаяСтрока = ВыбраннаяСтрока.Объект;
			
		Исключение
		КонецПопытки;
		
	ИначеЕсли ТипОбъекта = Тип("СправочникСсылка.ПравилаКонвертацииЗначений") Тогда
		
		Попытка
			
			ВладелецФормы.ВладелецФормы.ЭлементыФормы.ПравилаКонвертацииОбъектов.ТекущаяСтрока = ВыбраннаяСтрока.Объект.Владелец;
			ВладелецФормы.ВладелецФормы.ЭлементыФормы.ПравилаКонвертацииЗначений.ТекущаяСтрока = ВыбраннаяСтрока.Объект;
			
		Исключение
		КонецПопытки;
		
	КонецЕсли;
		
КонецПроцедуры

Процедура КоманднаяОсновнаяПоказатьПравила(Кнопка)
	
	ПерейтиКПравиламОбменаПоВыбраннойСтроке(ЭлементыФормы.ДанныеПоискаПКС.ТекущиеДанные);	
	
КонецПроцедуры
