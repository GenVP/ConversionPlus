////////////////////////////////////////////////////////////////////////////////
// ПЕРЕМЕННЫЕ МОДУЛЯ

//Вспомогательная переменная (массив) для хранения обработчиков
Перем мМассивОбработчиков;

//{benony
Перем мТекстОбработчикаДоИзменений;
Перем мПутьКФайлуДоИзменений;
Перем мПутьКФайлуТекущий;
//}benony

////////////////////////////////////////////////////////////////////////////////
// ПРОЦЕДУРЫ - ОБРАБОТЧИКИ СОБЫТИЙ ФОРМЫ


// Процедура - обработчик события "ПриОткрытии" формы.
//
Процедура ПриОткрытии()
	
	ПолучитьАлгоритмыПриОткрытии(ЭтаФорма, ЭтотОбъект, мМассивОбработчиков);
	
	Конфигурация = Владелец.Приемник;
	
	АктивизироватьСтраницуСобытия(ЭтотОбъект, мМассивОбработчиков, ЭлементыФормы.ПанельАлгоритмы, ЭлементыФормы);
	
	Если ЭтоНовый() Тогда
		СпособОтбораДанных = Перечисления.СпособыОтбораДанных.СтандартнаяВыборка;
	КонецЕсли;
	
	Если НЕ ЭтоПриложение8(Владелец.Источник.Приложение) Или НЕ ЭтоПриложение8(Владелец.Приемник.Приложение) Тогда
		ЭлементыФормы.КоманднаяПанель1.Кнопки.Удалить(ЭлементыФормы.КоманднаяПанель1.Кнопки.ОтладкаОбработчиков);
	КонецЕсли;
	
	РедакторОбработчиковКлиент.УстановитьСостояниеКнопокПанелиРедактора(ЭлементыФормы, "ПриОткрытии"); //benony
	
КонецПроцедуры // ПриОткрытии()

// Процедура - обработчик события "ПередЗаписью" формы.
//
Процедура ПередЗаписью(Отказ)
	
	УстановитьАлгоритмыПередЗаписью(ЭтаФорма, ЭтотОбъект, мМассивОбработчиков);
	
	ПроверитьВозможностьСозданияПКОДляОбъекта(Отказ, ОбъектВыборки);
	
КонецПроцедуры // ПередЗаписью()


////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ РЕКВИЗИТОВ

// Процедура - обработчик события "Регулирование" поля ввода порядка.
//
Процедура ПорядокРегулирование(Элемент, Направление, СтандартнаяОбработка)

	ИзменитьПорядокИнтерактивно(Элемент, Направление, СтандартнаяОбработка);
	
КонецПроцедуры

// Процедура - обработчик события "ПриСменеСтраницы" панели закладок.
//
Процедура ПанельАлгоритмыПриСменеСтраницы(Элемент, ТекущаяСтраница)
	
	ОбновитьПиктограммыАлгоритмов(мМассивОбработчиков, ЭлементыФормы.ПанельАлгоритмы, ЭлементыФормы);
	
	ЗаполнитьИмяОбработчика(Элемент.ТекущаяСтраница);
	
КонецПроцедуры // ПанельАлгоритмыПриСменеСтраницы()

Процедура КоманднаяПанель1ИнформацияПоОбработчикам(Кнопка)
	
	// вывод информации по обработчикам событий
	ОткрытьОписаниеОбработчиковСобытий("ПравилаОчисткиОбъектов", ЭлементыФормы.ПанельАлгоритмы.ТекущаяСтраница.Имя, ЭтаФорма);
	
КонецПроцедуры

Процедура КоманднаяПанель1СкопироватьОбработчикиЗагрузки(Кнопка)
	
	ВыгрузитьКодОбработчиков(ЭтотОбъект.Владелец, Ложь, ЭтотОбъект.Ссылка);
	
КонецПроцедуры

Процедура КоманднаяПанель1ВставитьОбработчики(Кнопка)
	
	ЗагрузитьКодОбработчиков(ЭтотОбъект.Владелец, ЭтаФорма, мМассивОбработчиков);
	
КонецПроцедуры

////////////////////////////////////////////////////////////////////////////////
// СЛУЖЕБНЫЕ ПРОЦЕДУРЫ И ФУНКЦИИ

Процедура ЗаполнитьИмяОбработчика(ТекущаяСтраница)
	
	ИмяСобытия = Сред(ТекущаяСтраница.Имя, 9);
	ИмяОбработчика = "ПОД_[КодПОД]_[ИмяСобытия]";
	ИмяОбработчика = СтрЗаменить(ИмяОбработчика, "[КодПОД]", СокрЛП(ЭтотОбъект.Код));
	ИмяОбработчика = СтрЗаменить(ИмяОбработчика, "[ИмяСобытия]", ИмяСобытия);
	ЭлементыФормы["ИмяОбработчика"+ИмяСобытия].Значение = ИмяОбработчика;
	
КонецПроцедуры

////////////////////////////////////////////////////////////////////////////////
// РЕДАКТИРОВАНИЕ АЛГОРИТМОВ ОБРАБОТЧИКОВ

//
//benony
Процедура КоманднаяПанельРедактированиеОбработчиковИзменить(Кнопка)
	
	РедакторОбработчиковКлиент.КомандаРедактораИзменить(ЭлементыФормы, мМассивОбработчиков, мТекстОбработчикаДоИзменений, мПутьКФайлуДоИзменений, мПутьКФайлуТекущий);
	
	ЗапуститьПриложение(мПутьКФайлуТекущий);
	ПодключитьОбработчикОжидания("ПроверитьРазличияВФайлах", 3);
	
КонецПроцедуры

//
//benony
Процедура КоманднаяПанельРедактированиеОбработчиковЗаписать(Кнопка)
	
	ОтключитьОбработчикОжидания("ПроверитьРазличияВФайлах");
	
	РедакторОбработчиковКлиент.КомандаРедактораЗаписать(ЭлементыФормы, мМассивОбработчиков, мПутьКФайлуТекущий);
	
КонецПроцедуры

//
//benony
Процедура КоманднаяПанельРедактированиеОбработчиковОтменитьИзменения(Кнопка)
	
	ОтключитьОбработчикОжидания("ПроверитьРазличияВФайлах");
	
	РедакторОбработчиковКлиент.КомандаРедактораОтменитьИзменения(ЭлементыФормы, мМассивОбработчиков, мТекстОбработчикаДоИзменений);
	
КонецПроцедуры

//
//benony
Процедура КоманднаяПанельРедактированиеОбработчиковПоказатьИзменения(Кнопка)
	
	РедакторОбработчиковКлиент.КомандаРедактораПоказатьРазличия(мПутьКФайлуДоИзменений, мПутьКФайлуТекущий);
	
КонецПроцедуры

//
//benony
Процедура ПроверитьРазличияВФайлах()
	
	РедакторОбработчиковКлиент.ОбработчикОжиданияПроверитьРазличия(ЭлементыФормы, мПутьКФайлуДоИзменений, мПутьКФайлуТекущий);
	
КонецПроцедуры

////////////////////////////////////////////////////////////////////////////////
// ОПЕРАТОРЫ ОСНОВНОЙ ПРОГРАММЫ

мМассивОбработчиков = ПолучитьМассивИменОбработчиков("ПравилаОчисткиОбъектов");

